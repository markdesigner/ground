import{_ as H,r as x,d as O,e as V,o as w,c as S,u as g,f as G,b as l,t as j,p as q,a as F}from"./index-04b214e4.js";const J=c=>(q("data-v-522a37f6"),c=c(),F(),c),K={class:"snake"},Q=J(()=>l("h1",null,"貪吃蛇大作戰",-1)),X={key:0,class:"alert-container"},Y={class:"score"},Z={class:"canvas-container"},i=14,s=14,n=50,$={__name:"index",setup(c){const _=x();let r=x(!1),p=400,f=x(0),o=null,t={},a={},y=null;const C=()=>{o=_.value.getContext("2d")},h=(e=null)=>{e?(d(),k()):(N(),d(),k())},v=()=>{W(),R(),T(),B()},k=e=>{y=setInterval(()=>{A()},p)},A=e=>{v(),!L()&&(z(),P(),U(),b())},I=()=>{f.value+=1},b=()=>{a.position.x===t.position[0].x&&a.position.y===t.position[0].y&&(d(),E(),I(),M())},M=()=>{p-=30,u(),h(t)},L=()=>{const e={x:t.position[0].x+t.direction.x,y:t.position[0].y+t.direction.y};if(e.x<0||e.x>=s||e.y<0||e.y>=i)return u(),r.value=!0,setTimeout(()=>{r.value=!1},2e3),!0},R=()=>{o.fillStyle="wheat",o.fillRect(0,0,s*n,i*n)},T=()=>{o.strokeStyle="#8484843b",o.lineWidth=1;for(let e=0;e<=s;e+=1)o.beginPath(),o.moveTo(e*n,0),o.lineTo(e*n,i*n),o.stroke()},B=()=>{o.strokeStyle="#8484843b",o.lineWidth=1;for(let e=0;e<=i;e+=1)o.beginPath(),o.moveTo(0,e*n),o.lineTo(s*n,e*n),o.stroke()},P=()=>{o.fillStyle="blue";for(let e of t.position)o.fillRect(e.x*n,e.y*n,n,n)},U=()=>{o.beginPath(),o.fillStyle="red",o.arc(a.position.x*n+n/2,a.position.y*n+n/2,n/2,0,2*Math.PI),o.fill()},W=()=>{o.clearRect(0,0,s*n,i*n)},z=()=>{const e={x:t.position[0].x+t.direction.x,y:t.position[0].y+t.direction.y};t.position.unshift(e),t.position.pop()},E=()=>{t.position.push({x:t.position[t.position.length-1].x-t.direction.x,y:t.position[t.position.length-1].y-t.direction.y})},N=()=>{t={position:[{x:s/2,y:i/2},{x:s/2+1,y:i/2},{x:s/2+2,y:i/2}],size:1,direction:{x:0,y:-1}}},d=()=>{if(a={position:{x:Math.floor(Math.random()*s),y:Math.floor(Math.random()*i)}},t){for(let e of t.position)if(e.x===a.position.x&&e.y===a.position.y){d();return}}},D=()=>{p=400,f.value=0,r.value=!1},m=()=>{D(),h()};O(()=>{C(),v(),document.addEventListener("keydown",e=>{e.key==="ArrowLeft"?t.direction={x:-1,y:0}:e.key==="ArrowRight"?t.direction={x:1,y:0}:e.key==="ArrowUp"?t.direction={x:0,y:-1}:e.key==="ArrowDown"?t.direction={x:0,y:1}:e.key==="Enter"&&m()})}),V(()=>{u()});const u=()=>{clearInterval(y),y=null};return(e,ee)=>(w(),S("div",K,[Q,g(r)?(w(),S("div",X,"撞牆了")):G("",!0),l("button",{onClick:m},"開始遊戲"),l("div",Y,[l("h1",null,j(g(f)),1)]),l("div",Z,[l("canvas",{class:"canvas",ref_key:"canvas",ref:_,width:"1000",height:"1000"},null,512)])]))}},oe=H($,[["__scopeId","data-v-522a37f6"]]);export{oe as default};
